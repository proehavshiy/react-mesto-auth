(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,a){"use strict";var n=a(1),r=a.n(n).a.createContext();t.a=r},34:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(24),o=a.n(s),i=a(6),c=(a(34),a(27)),u=a(2),l=a(3),m=a(16),_=a(17),p=new(function(){function e(t){var a=t.serverUrl,n=t.cohort,r=t.token;Object(m.a)(this,e),this._serverUrl=a,this._cohort=n,this._token=r}return Object(_.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/users/me"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"sendUserInfo",value:function(e){var t=e.name,a=e.about;return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:a})}).then(this._checkResponse)}},{key:"sendNewCard",value:function(e){var t=e.name,a=e.link;return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:a})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({_id:e})}).then(this._checkResponse)}},{key:"sendUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({cardID:e,like:t})}).then(this._checkResponse)}}]),e}())({serverUrl:"https://mesto.nomoreparties.co/v1",cohort:"cohort-24",token:"edb7481a-fcf7-4397-94a7-daeb2327e95b"}),d="https://auth.nomoreparties.co",h=function(e){return e.ok?e.json():Promise.reject(e)},j=a(14),f=a(20),b=a.p+"static/media/Mesto-logo.5f3664ca.svg",v=a(0);var g=function(e){var t=e.expandNavBar,a=r.a.useState(!1),n=Object(u.a)(a,2),s=n[0],o=n[1];return s?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("button",{className:"page__button page__button_type_close",onClick:function(){o(!1),t(!1)},"aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u0435\u043d\u044e",type:"button"})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"page__button header__button",onClick:function(){o(!0),t(!0)},children:[Object(v.jsx)("div",{className:"header__button header__button_burger"}),Object(v.jsx)("div",{className:"header__button header__button_burger"}),Object(v.jsx)("div",{className:"header__button header__button_burger"})]})})};var O=function(e){var t=e.onSignOut,a=e.email;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{className:"header__email",children:a}),Object(v.jsx)("button",{className:"header__button header__button_logout page__button",onClick:t,children:"\u0412\u044b\u0439\u0442\u0438"})]})};var x=function(e){var t=e.onSignOut,a=e.email;return Object(v.jsxs)("div",{className:"header__expanded-nav-bar",children:[Object(v.jsx)("p",{className:"header__email",children:a}),Object(v.jsx)("button",{className:"header__button header__button_logout page__button",onClick:t,children:"\u0412\u044b\u0439\u0442\u0438"})]})};var S=function(e){var t=e.onSignOut,a=e.email,n=Object(l.h)(),s=Object(f.useMediaQuery)({query:"(max-width: 480px)"}),o=Object(f.useMediaQuery)({query:"(min-width: 481px)"}),c=r.a.useState(!1),m=Object(u.a)(c,2),_=m[0],p=m[1];return r.a.useEffect((function(){p(!1)}),[o,n]),Object(v.jsxs)("div",{className:"header__content",children:[_&&Object(v.jsx)(x,{onSignOut:t,email:a}),Object(v.jsxs)("div",{className:"header__main page__animation",children:[Object(v.jsx)("img",{className:"logo",src:b,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e"}),Object(v.jsx)("nav",{className:"header__nav-bar",children:"/"===n.pathname&&(s&&Object(v.jsx)(g,{expandNavBar:p})||o&&Object(v.jsx)(O,{onSignOut:t,email:a}))||"/sign-in"===n.pathname&&Object(v.jsx)(i.c,{className:"header__button page__button",to:"/sign-up",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})||"/sign-up"===n.pathname&&Object(v.jsx)(i.c,{className:"header__button page__button",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})};var y=function(e){var t=e.onSignOut,a=e.email;return Object(v.jsx)("header",{className:"header page__section page__animation",children:Object(v.jsx)(S,{onSignOut:t,email:a})})};var N=function(){return Object(v.jsx)("footer",{className:"footer page__section page__animation",children:Object(v.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})};var k=function(e){var t=e.name,a=e.isOpen,n=e.onClose,s=e.children,o=a?"popup__flexed popup_opened":"popup__flexed";return r.a.useEffect((function(){if(a){var e=function(e){"Escape"===e.key&&n()};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}}),[a,n]),Object(v.jsx)("div",{className:"popup popup_".concat(t," ").concat(o),onClick:function(e){e.target===e.currentTarget&&n()},children:Object(v.jsxs)("div",{className:"popup__container popup__container_".concat(t),children:[Object(v.jsx)("button",{className:"page__button page__button_type_close popup__button-close",onClick:function(e){e.target===e.currentTarget&&n()},"aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0417\u0430\u043a\u0440\u044b\u0442\u044c",type:"button"}),s]})})};var C=function(e){var t=e.card,a=e.onClose;return Object(v.jsx)(k,{name:"open-image",isOpen:t,onClose:a,children:Object(v.jsxs)("figure",{className:"popup__figure",children:[Object(v.jsx)("img",{className:"popup__image",src:t?t.link:"",alt:t?"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430: ".concat(t.name):""}),Object(v.jsx)("figcaption",{className:"popup__figcaption",children:t?t.name:""})]})})},M=a(10),T=a(5);var w=function(e){var t=e.name,a=e.title,n=e.submitText,r=e.isOpen,s=e.onClose,o=e.onSubmit,i=e.submitButtonState,c=e.theme,u=e.children;return Object(v.jsx)(k,{name:t,isOpen:r,onClose:s,children:Object(v.jsxs)("form",{className:"form form_theme_".concat(c),onSubmit:o,name:"".concat(t,"-form"),noValidate:!0,autoComplete:"off",children:[Object(v.jsx)("h2",{className:"form__heading",children:a}),u,Object(v.jsx)("button",{className:"page__button form__button-save form__button-save_theme_".concat(c),disabled:!i,type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443",children:n})]})})};var E=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,s=e.isSubmitting,o="white",i=r.a.useContext(j.a),c=r.a.useState({name:{value:"",valid:!0,errorMessage:""},signing:{value:"",valid:!0,errorMessage:""}}),l=Object(u.a)(c,2),m=l[0],_=l[1],p=!(!m.name.valid||!m.signing.valid),d=s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",h=m.name.errorMessage?"form__input_error":"",f=m.name.errorMessage?"form__input-error_active":"",b=m.name.errorMessage,g=m.signing.errorMessage?"form__input_error":"",O=m.signing.errorMessage?"form__input-error_active":"",x=m.signing.errorMessage;function S(e){var t=e.target,a=t.name,n=t.value,r=t.validity.valid,s=t.validationMessage;_((function(e){return Object(T.a)(Object(T.a)({},e),{},Object(M.a)({},a,{value:n,valid:r,errorMessage:s}))}))}return r.a.useEffect((function(){t&&_((function(e){return Object(T.a)(Object(T.a)({},e),{},{name:{value:i.name,valid:!0,errorMessage:""},signing:{value:i.about,valid:!0,errorMessage:""}})}))}),[i,t]),Object(v.jsx)(w,{name:"change-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitText:d,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:m.name.value,about:m.signing.value})},submitButtonState:p,theme:o,children:Object(v.jsxs)("fieldset",{className:"form__profile-information",children:[Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(o," ").concat(h),value:m.name?m.name.value:"",onChange:S,type:"text",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,minLength:2,maxLength:40}),Object(v.jsx)("span",{className:"form__input-error ".concat(f),children:b})]}),Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(o," ").concat(g),value:m.signing?m.signing.value:"",onChange:S,type:"text",name:"signing",placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u044c",required:!0,minLength:2,maxLength:200}),Object(v.jsx)("span",{className:"form__input-error ".concat(O),children:x})]})]})})};var U=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,s=e.isSubmitting,o="white",i=r.a.useState({}),c=Object(u.a)(i,2),l=c[0],m=c[1],_=!!(l.value&&l.value&&l.valid&&l.valid),p=s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",d=l.errorMessage?"form__input_error":"",h=l.errorMessage?"form__input-error_active":"";return r.a.useEffect((function(){t&&m({value:"",valid:!0,errorMessage:""})}),[t]),Object(v.jsx)(w,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitText:p,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({avatar:l.value})},submitButtonState:_,theme:o,children:Object(v.jsx)("fieldset",{className:"form__profile-information",children:Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(o," ").concat(d),value:l.value||"",onChange:function(e){var t=e.target,a=t.value,n=t.validity.valid,r=t.validationMessage;m({value:a,valid:n,errorMessage:r})},type:"url",name:"image-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(v.jsx)("span",{className:"form__input-error ".concat(h),children:l.errorMessage})]})})})};var L=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,s=e.isSubmitting,o="white",i=r.a.useState({location:{value:"",valid:!1,errorMessage:""},link:{value:"",valid:!1,errorMessage:""}}),c=Object(u.a)(i,2),l=c[0],m=c[1],_=!(!l.location.valid||!l.link.valid),p=s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...",d=l.location.errorMessage?"form__input_error":"",h=l.location.errorMessage?"form__input-error_active":"",j=l.location.errorMessage,f=l.link.errorMessage?"form__input_error":"",b=l.link.errorMessage?"form__input-error_active":"",g=l.link.errorMessage;function O(e){var t=e.target,a=t.name,n=t.value,r=t.validity.valid,s=t.validationMessage;m((function(e){return Object(T.a)(Object(T.a)({},e),{},Object(M.a)({},a,{value:n,valid:r,errorMessage:s}))}))}return r.a.useEffect((function(){t&&m({location:{value:"",valid:!1,errorMessage:""},link:{value:"",valid:!1,errorMessage:""}})}),[t]),Object(v.jsx)(w,{name:"add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitText:p,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:l.location.value,link:l.link.value})},submitButtonState:_,theme:o,children:Object(v.jsxs)("fieldset",{className:"form__profile-information",children:[Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(o," ").concat(d),value:l.location?l.location.value:"",onChange:O,type:"text",name:"location",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:2,maxLength:30}),Object(v.jsx)("span",{className:"form__input-error ".concat(h),children:j})]}),Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(o," ").concat(f),value:l.link?l.link.value:"",onChange:O,type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(v.jsx)("span",{className:"form__input-error ".concat(b),children:g})]})]})})};var R=function(e){var t=e.onClose,a=e.handleCardDelete,n=e.cardForDeletion,r=e.isSubmitting?"\u0414\u0430":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...";return Object(v.jsx)(w,{name:"confirm-deletion",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitText:r,isOpen:n,onClose:t,onSubmit:function(e){e.preventDefault(),a(n)},submitButtonState:n,theme:"white"})};var D=function(e){var t=e.name,a=e.title,n=e.submitText,r=e.onSubmit,s=e.submitButtonState,o=e.isRegister,c=e.theme,u=e.children;return Object(v.jsx)("div",{className:"page-with-form page__block-alignment page__animation",children:Object(v.jsx)("div",{className:"page-with-form__container page-with-form__container_".concat(t),children:Object(v.jsxs)("form",{className:"form form_theme_".concat(c),onSubmit:r,name:"".concat(t,"-form"),noValidate:!0,autoComplete:"off",children:[Object(v.jsx)("h2",{className:"form__heading form__heading_style",onClick:function(){throw new Error("test error")},children:a}),u,Object(v.jsx)("button",{className:"page__button form__button-save form__button-save_margin form__button-save_theme_".concat(c),disabled:!s,type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443",children:n}),o&&Object(v.jsxs)("p",{className:"form__redirection",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(v.jsx)(i.b,{to:"/sign-in",className:"form__link page__button",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})};var I=function(e){var t=e.onLogin,a=e.isSubmitting,n=e.serverRequestStatus,s=r.a.useState({email:{value:"",valid:!1,errorMessage:""},password:{value:"",valid:!1,errorMessage:""}}),o=Object(u.a)(s,2),i=o[0],c=o[1],l="dark",m=!(!i.email.valid||!i.password.valid),_=a?"\u0412\u043e\u0439\u0442\u0438":"\u0412\u0445\u043e\u0434...",p=i.email.errorMessage?"form__input_error":"",d=i.email.errorMessage?"form__input-error_active":"",h=i.email.errorMessage,j=i.password.errorMessage?"form__input_error":"",f=i.password.errorMessage?"form__input-error_active":"",b=i.password.errorMessage;function g(e){var t=e.target,a=t.name,n=t.value,r=t.validity.valid,s=t.validationMessage;c((function(e){return Object(T.a)(Object(T.a)({},e),{},Object(M.a)({},a,{value:n,valid:r,errorMessage:s}))}))}return r.a.useEffect((function(){"success"===n&&c({email:{value:"",valid:!1,errorMessage:""},password:{value:"",valid:!1,errorMessage:""}})}),[n]),Object(v.jsx)(D,{name:"login",title:"\u0412\u0445\u043e\u0434",submitText:_,onSubmit:function(e){e.preventDefault(),i.email.value&&i.password.value&&t(i.email.value,i.password.value)},submitButtonState:m,isRegister:!1,theme:l,children:Object(v.jsxs)("fieldset",{className:"form__profile-information form__profile-information_margin",children:[Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(l," ").concat(p),value:i.email?i.email.value:"",onChange:g,type:"email",name:"email",placeholder:"Email",required:!0,minLength:6,maxLength:30}),Object(v.jsx)("span",{className:"form__input-error ".concat(d),children:h})]}),Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(l," ").concat(j),value:i.password?i.password.value:"",onChange:g,type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:6}),Object(v.jsx)("span",{className:"form__input-error ".concat(f),children:b})]})]})})};var P=function(e){var t=e.onRegister,a=e.isSubmitting,n=e.serverRequestStatus,s=r.a.useState({email:{value:"",valid:!1,errorMessage:""},password:{value:"",valid:!1,errorMessage:""}}),o=Object(u.a)(s,2),i=o[0],c=o[1],l="dark",m=!(!i.email.valid||!i.password.valid),_=a?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...",p=i.email.errorMessage?"form__input_error":"",d=i.email.errorMessage?"form__input-error_active":"",h=i.email.errorMessage,j=i.password.errorMessage?"form__input_error":"",f=i.password.errorMessage?"form__input-error_active":"",b=i.password.errorMessage;function g(e){var t=e.target,a=t.name,n=t.value,r=t.validity.valid,s=t.validationMessage;c((function(e){return Object(T.a)(Object(T.a)({},e),{},Object(M.a)({},a,{value:n,valid:r,errorMessage:s}))}))}return r.a.useEffect((function(){"success"===n&&c({email:{value:"",valid:!1,errorMessage:""},password:{value:"",valid:!1,errorMessage:""}})}),[n]),Object(v.jsx)(D,{name:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",submitText:_,onSubmit:function(e){e.preventDefault(),i.email.value&&i.password.value&&t(i.email.value,i.password.value)},submitButtonState:m,isRegister:!0,theme:l,children:Object(v.jsxs)("fieldset",{className:"form__profile-information form__profile-information_margin",children:[Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(l," ").concat(p),value:i.email?i.email.value:"",onChange:g,type:"email",name:"email",placeholder:"Email",required:!0,minLength:6,maxLength:30}),Object(v.jsx)("span",{className:"form__input-error ".concat(d),children:h})]}),Object(v.jsxs)("section",{className:"form__input-section",children:[Object(v.jsx)("input",{className:"form__input form__input_theme_".concat(l," ").concat(j),value:i.password?i.password.value:"",onChange:g,type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:6}),Object(v.jsx)("span",{className:"form__input-error ".concat(f),children:b})]})]})})};var q=function(e){var t=e.isOpen,a=e.onClose,n=e.popupStatusMessage,r=Object(l.g)(),s="success"===n.errorType,o=s?"popup__image-status_type_success":"popup__image-status_type_reject";return Object(v.jsx)(k,{name:"status",isOpen:t,onClose:function(){a(),s&&r.push("/sign-in")},children:Object(v.jsxs)("div",{className:"popup__status",children:[Object(v.jsx)("div",{className:"popup__image-status ".concat(o)}),Object(v.jsx)("h2",{className:"popup__heading popup__heading_status",children:n.errorText})]})})},A=a(28);var B=function(){return Object(v.jsx)("div",{className:"spinner page__section",children:Object(v.jsx)("div",{className:"spinner__body"})})},F=function(e){var t=e.component,a=Object(A.a)(e,["component"]);return Object(v.jsx)(l.b,{children:function(){return a.loggedIn?a.isUserDataReceived?Object(v.jsx)(t,Object(T.a)({},a)):Object(v.jsx)(B,{}):Object(v.jsx)(l.a,{to:"/sign-in"})}})},z=a(29),J=a(26),H=function(e){Object(z.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(_.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Something went wrong."}),Object(v.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),Object(v.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),a}(r.a.Component),Q=r.a.lazy((function(){return a.e(3).then(a.bind(null,43))}));var V=function(){var e=r.a.useState(!1),t=Object(u.a)(e,2),a=t[0],s=t[1],o=r.a.useState(!1),i=Object(u.a)(o,2),m=i[0],_=i[1],f=r.a.useState(!1),b=Object(u.a)(f,2),g=b[0],O=b[1],x=r.a.useState(null),S=Object(u.a)(x,2),k=S[0],M=S[1],T=r.a.useState(null),w=Object(u.a)(T,2),D=w[0],A=w[1],z=r.a.useState(!1),J=Object(u.a)(z,2),V=J[0],G=J[1],Y=r.a.useState(""),K=Object(u.a)(Y,2),W=K[0],X=K[1],Z=Object(l.g)(),$=r.a.useState({name:"",about:"",avatar:""}),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(u.a)(ne,2),se=re[0],oe=re[1],ie=r.a.useState([]),ce=Object(u.a)(ie,2),ue=ce[0],le=ce[1],me=r.a.useState(!0),_e=Object(u.a)(me,2),pe=_e[0],de=_e[1],he=r.a.useState(!1),je=Object(u.a)(he,2),fe=je[0],be=je[1],ve=r.a.useState({errorStatus:null,message:""}),ge=Object(u.a)(ve,2),Oe=ge[0],xe=ge[1];function Se(){O(!1),s(!1),_(!1),A(null),M(null),be(!1)}function ye(e){var t={400:{errorType:"fault",errorText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"},401:{errorType:"fault",errorText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"},201:{errorType:"success",errorText:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"},other:{errorType:"fault",errorText:"\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."},serverError:{errorType:"fault",errorText:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."}};xe("undefined"===typeof e?{errorType:t.other.errorType,errorText:t.other.errorText}:{errorType:t[e].errorType,errorText:t[e].errorText})}function Ne(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(d,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(h)).then((function(e){e&&(X(e.data.email),G(!0),Z.push("/"))})).catch((function(e){be(!0),ye(e.status)}))}return r.a.useEffect((function(){V&&Promise.all([p.getUserInfo(),p.getCards()]).then((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];ae(a),le(n),oe(!0)})).catch((function(e){be(!0),ye(e.status)}))}),[V]),r.a.useEffect((function(){Ne()}),[]),Object(v.jsx)(j.a.Provider,{value:te,children:Object(v.jsxs)("div",{className:"page",children:[Object(v.jsx)(y,{onSignOut:function(){localStorage.removeItem("jwt"),G(!1),Z.push("/sign-in")},email:W}),Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/sign-up",children:Object(v.jsx)(P,{onRegister:function(e,t){de(!1),function(e,t){return fetch("".concat(d,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(h)}(e,t).then((function(e){e&&(G(!1),be(!0),ye(201))})).catch((function(e){be(!0),ye(e.status)})).finally((function(){de(!0)}))},isSubmitting:pe,serverRequestStatus:Oe.errorType})}),Object(v.jsx)(l.b,{path:"/sign-in",children:Object(v.jsx)(H,{children:Object(v.jsx)(I,{onLogin:function(e,t){de(!1),e&&t&&function(e,t){return fetch("".concat(d,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(h)}(e,t).then((function(t){t.token&&(localStorage.setItem("jwt",t.token),X(e),G(!0),Z.push("/"))})).catch((function(e){be(!0),ye(e.status)})).finally((function(){de(!0)}))},isSubmitting:pe,serverRequestStatus:Oe.errorType})})}),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(n.Suspense,{fallback:Object(v.jsx)(B,{}),children:Object(v.jsx)(F,{exact:!0,path:"/",loggedIn:V,cards:ue,onEditProfile:function(){O(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){s(!0)},onCardClick:function(e){A(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===te._id}));p.changeLikeCardStatus(e._id,!t).then((function(t){le((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){be(!0),ye(e.status)}))},onCardDelete:M,isUserDataReceived:se,component:Q})}),Object(v.jsx)(N,{})]})]}),Object(v.jsx)(q,{isOpen:fe,onClose:Se,popupStatusMessage:Oe}),Object(v.jsx)(E,{isOpen:g,onClose:Se,onUpdateUser:function(e){de(!1),p.sendUserInfo(e).then((function(e){ae(e),Se()})).catch((function(e){be(!0),ye(e.status)})).finally((function(){de(!0)}))},isSubmitting:pe}),Object(v.jsx)(U,{isOpen:a,onClose:Se,onUpdateAvatar:function(e){de(!1),p.sendUserAvatar(e).then((function(e){ae(e),Se()})).catch((function(e){be(!0),ye(e.status)})).finally((function(){de(!0)}))},isSubmitting:pe}),Object(v.jsx)(L,{isOpen:m,onClose:Se,onAddPlace:function(e){de(!1),p.sendNewCard(e).then((function(e){le([e].concat(Object(c.a)(ue))),Se()})).catch((function(e){be(!0),ye(e.status)})).finally((function(){de(!0)}))},isSubmitting:pe}),Object(v.jsx)(C,{card:D,onClose:Se}),Object(v.jsx)(R,{onClose:Se,handleCardDelete:function(e){de(!1),p.deleteCard(e._id).then((function(){le(ue.filter((function(t){return t._id!==e._id}))),Se()})).catch((function(e){be(!0),ye(e.status)})).finally((function(){de(!0)}))},cardForDeletion:k,isSubmitting:pe})]})})},G=function(e){e&&e instanceof Function&&a.e(4).then(a.bind(null,42)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),s(e),o(e)}))};o.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(i.a,{basename:"/react-mesto-auth",children:Object(v.jsx)(V,{})})}),document.getElementById("root")),G()}},[[41,1,2]]]);
//# sourceMappingURL=main.074b8cd1.chunk.js.map